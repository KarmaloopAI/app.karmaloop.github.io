(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{52854:function(e,t,a){Promise.resolve().then(a.bind(a,4200))},4200:function(e,t,a){"use strict";a.d(t,{default:function(){return L}});var s=a(14623),i=a(43860),r=a(99376),n=a(2265),l=a(60429),o=a(5526),c=a(29090),d=a(89345),m=a(87769),u=a(42208),x=a(69064);function h(e){let{onSuccess:t,onSwitchToSignup:a,onForgotPassword:i}=e,[r,h]=(0,n.useState)({email:"",password:""}),[p,y]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[f,j]=(0,n.useState)({}),N=()=>{let e={};return r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(e.email="Please enter a valid email"):e.email="Email is required",r.password||(e.password="Password is required"),j(e),0===Object.keys(e).length},v=async e=>{if(e.preventDefault(),N()){b(!0);try{console.log("\uD83D\uDD10 Attempting login...");let{data:e,error:a}=await o.OQ.auth.signInWithPassword({email:r.email,password:r.password});if(a)throw console.error("❌ Login error:",a),a;e.user&&(console.log("✅ Login successful, user:",e.user.email),x.ZP.success("Welcome back!"),setTimeout(()=>{console.log("\uD83C\uDFAF Calling onSuccess callback"),t()},100))}catch(e){console.error("\uD83D\uDCA5 Login error:",e),e.message.includes("Invalid login credentials")?x.ZP.error("Invalid email or password"):e.message.includes("Email not confirmed")?x.ZP.error("Please check your email and click the verification link"):x.ZP.error(e.message||"Failed to sign in")}finally{setTimeout(()=>{b(!1)},500)}}},w=(e,t)=>{h(a=>({...a,[e]:t})),f[e]&&j(t=>({...t,[e]:void 0}))};return(0,s.jsx)("div",{className:"min-h-screen auth-bg flex items-center justify-center p-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card rounded-3xl shadow-strong p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary",children:"Welcome Back"}),(0,s.jsx)("p",{className:"text-text-secondary mt-2",children:"Sign in to manage your AI voice agents"})]}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-secondary"}),(0,s.jsx)("input",{type:"email",value:r.email,onChange:e=>w("email",e.target.value),className:"input-field pl-10 ".concat(f.email?"border-error-500":""),placeholder:"john@example.com",autoComplete:"email",disabled:g})]}),f.email&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:f.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:p?"text":"password",value:r.password,onChange:e=>w("password",e.target.value),className:"input-field pr-10 ".concat(f.password?"border-error-500":""),placeholder:"••••••••",autoComplete:"current-password",disabled:g}),(0,s.jsx)("button",{type:"button",onClick:()=>y(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2",disabled:g,children:p?(0,s.jsx)(m.Z,{className:"w-5 h-5 text-text-secondary"}):(0,s.jsx)(u.Z,{className:"w-5 h-5 text-text-secondary"})})]}),f.password&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:f.password})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("button",{type:"button",onClick:i,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",disabled:g,children:"Forgot your password?"})}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Signing in...":"Sign In"})]}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsxs)("p",{className:"text-text-secondary",children:["Don't have an account?"," ",(0,s.jsx)("button",{onClick:a,className:"text-primary-600 hover:text-primary-700 font-medium",disabled:g,children:"Create one"})]})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 p-4 trial-banner rounded-xl border border-primary-200",children:[(0,s.jsx)("h3",{className:"font-medium text-primary-800 mb-1",children:"Start Your Free Trial"}),(0,s.jsx)("p",{className:"text-sm text-primary-700",children:"Get 14 days and 100 minutes free to test Kai's AI voice agents"})]})]})})}var p=a(92369),y=a(13041),g=a(60044);function b(e){let{onSuccess:t,onSwitchToLogin:a}=e,[i,r]=(0,n.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phoneNumber:"",organizationName:"",industry:""}),[c,h]=(0,n.useState)(!1),[b,f]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1),[v,w]=(0,n.useState)(1),[S,E]=(0,n.useState)({}),k=()=>{let e={};return i.firstName.trim()||(e.firstName="First name is required"),i.lastName.trim()||(e.lastName="Last name is required"),i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(e.email="Please enter a valid email"):e.email="Email is required",i.password?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",i.password!==i.confirmPassword&&(e.confirmPassword="Passwords do not match"),i.phoneNumber.trim()?/^\+?[\d\s\-\(\)]+$/.test(i.phoneNumber)||(e.phoneNumber="Please enter a valid phone number"):e.phoneNumber="Phone number is required",E(e),0===Object.keys(e).length},C=()=>{let e={};return i.organizationName.trim()||(e.organizationName="Organization name is required"),i.industry.trim()||(e.industry="Industry is required"),E(e),0===Object.keys(e).length},A=()=>{k()&&w(2)},P=async e=>{if(e.preventDefault(),C()){N(!0);try{let e=i.phoneNumber.replace(/\D/g,"");10===e.length?e="+1".concat(e):11===e.length&&e.startsWith("1")?e="+".concat(e):e.startsWith("+")||(e="+1".concat(e));let{data:a,error:s}=await o.OQ.auth.signUp({email:i.email,password:i.password,options:{data:{first_name:i.firstName,last_name:i.lastName,phone_number:e,organization_name:i.organizationName,industry:i.industry},emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(s)throw s;if(a.user){console.log("✅ User created successfully:",a.user.email),console.log("\uD83C\uDFE2 Creating organization...");let{data:s,error:r}=await o.OQ.from("organizations").insert({name:i.organizationName,industry:i.industry,default_country_code:"+1"}).select().single();if(r)throw console.error("❌ Organization creation error:",r),r;console.log("✅ Organization created:",s),console.log("\uD83D\uDCCB Updating user profile...");let{error:n}=await o.OQ.from("user_profiles").update({organization_id:s.id,phone_number:e,email_verified:!1}).eq("id",a.user.id);if(n)throw console.error("❌ Profile update error:",n),n;console.log("✅ Profile updated successfully"),console.log("\uD83D\uDCB3 Creating subscription...");let{error:l}=await o.OQ.from("subscriptions").insert({organization_id:s.id,status:"trial",minutes_included:100,minutes_used:0});if(l)throw console.error("❌ Subscription creation error:",l),l;console.log("✅ Subscription created successfully"),x.ZP.success("Account created successfully! Please check your email for verification."),t()}}catch(e){console.error("Signup error:",e),x.ZP.error(e.message||"Failed to create account")}finally{N(!1)}}},D=(e,t)=>{r(a=>({...a,[e]:t})),S[e]&&E(t=>({...t,[e]:void 0}))};return(0,s.jsx)("div",{className:"min-h-screen auth-bg flex items-center justify-center p-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card rounded-3xl shadow-strong p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(p.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary",children:"Create Your Account"}),(0,s.jsx)("p",{className:"text-text-secondary mt-2",children:"Join the AI voice agent revolution"}),!1]}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(v>=1?"bg-primary-600 text-white":"bg-neutral-600 text-neutral-400"),children:"1"}),(0,s.jsx)("div",{className:"w-16 h-1 rounded ".concat(v>=2?"bg-primary-600":"bg-neutral-600")}),(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(v>=2?"bg-primary-600 text-white":"bg-neutral-600 text-neutral-400"),children:"2"})]})}),(0,s.jsx)("form",{onSubmit:1===v?e=>{e.preventDefault(),A()}:P,children:1===v?(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-center text-text-primary",children:"Personal Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"First Name"}),(0,s.jsx)("input",{type:"text",value:i.firstName,onChange:e=>D("firstName",e.target.value),className:"input-field ".concat(S.firstName?"border-error-500":""),placeholder:"John"}),S.firstName&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.firstName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Last Name"}),(0,s.jsx)("input",{type:"text",value:i.lastName,onChange:e=>D("lastName",e.target.value),className:"input-field ".concat(S.lastName?"border-error-500":""),placeholder:"Doe"}),S.lastName&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.lastName})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-secondary"}),(0,s.jsx)("input",{type:"email",value:i.email,onChange:e=>D("email",e.target.value),className:"input-field pl-10 ".concat(S.email?"border-error-500":""),placeholder:"john@example.com"})]}),S.email&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Phone Number"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-secondary"}),(0,s.jsx)("input",{type:"tel",value:i.phoneNumber,onChange:e=>D("phoneNumber",e.target.value),className:"input-field pl-10 ".concat(S.phoneNumber?"border-error-500":""),placeholder:"+1 (555) 123-4567"})]}),S.phoneNumber&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.phoneNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:c?"text":"password",value:i.password,onChange:e=>D("password",e.target.value),className:"input-field pr-10 ".concat(S.password?"border-error-500":""),placeholder:"••••••••"}),(0,s.jsx)("button",{type:"button",onClick:()=>h(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:c?(0,s.jsx)(m.Z,{className:"w-5 h-5 text-text-secondary"}):(0,s.jsx)(u.Z,{className:"w-5 h-5 text-text-secondary"})})]}),S.password&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.password})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Confirm Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:b?"text":"password",value:i.confirmPassword,onChange:e=>D("confirmPassword",e.target.value),className:"input-field pr-10 ".concat(S.confirmPassword?"border-error-500":""),placeholder:"••••••••"}),(0,s.jsx)("button",{type:"button",onClick:()=>f(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:b?(0,s.jsx)(m.Z,{className:"w-5 h-5 text-text-secondary"}):(0,s.jsx)(u.Z,{className:"w-5 h-5 text-text-secondary"})})]}),S.confirmPassword&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.confirmPassword})]}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-primary",children:"Continue to Organization"})]}):(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-center text-text-primary",children:"Organization Details"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Organization Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-secondary"}),(0,s.jsx)("input",{type:"text",value:i.organizationName,onChange:e=>D("organizationName",e.target.value),className:"input-field pl-10 ".concat(S.organizationName?"border-error-500":""),placeholder:"Acme Corporation"})]}),S.organizationName&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.organizationName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Industry"}),(0,s.jsxs)("select",{value:i.industry,onChange:e=>D("industry",e.target.value),className:"input-field ".concat(S.industry?"border-error-500":""),children:[(0,s.jsx)("option",{value:"",children:"Select your industry"}),(0,s.jsx)("option",{value:"Technology",children:"Technology"}),(0,s.jsx)("option",{value:"Healthcare",children:"Healthcare"}),(0,s.jsx)("option",{value:"Finance",children:"Finance"}),(0,s.jsx)("option",{value:"Retail",children:"Retail"}),(0,s.jsx)("option",{value:"Real Estate",children:"Real Estate"}),(0,s.jsx)("option",{value:"Education",children:"Education"}),(0,s.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,s.jsx)("option",{value:"Hospitality",children:"Hospitality"}),(0,s.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,s.jsx)("option",{value:"Consulting",children:"Consulting"}),(0,s.jsx)("option",{value:"Other",children:"Other"})]}),S.industry&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:S.industry})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(1),className:"flex-1 btn-secondary",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:j,className:"flex-1 btn-primary",children:j?"Creating Account...":"Create Account"})]})]})}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsxs)("p",{className:"text-text-secondary",children:["Already have an account?"," ",(0,s.jsx)("button",{onClick:a,className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})})]})})}var f=a(65302),j=a(32660);function N(e){let{onBack:t}=e,[a,i]=(0,n.useState)(""),[r,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(""),y=e=>/\S+@\S+\.\S+/.test(e),g=async e=>{if(e.preventDefault(),!a.trim()){p("Email is required");return}if(!y(a)){p("Please enter a valid email address");return}c(!0),p("");try{let{error:e}=await o.OQ.auth.resetPasswordForEmail(a,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")});if(e)throw e;u(!0),x.ZP.success("Password reset email sent!")}catch(e){console.error("Password reset error:",e),e.message.includes("rate limit")?p("Too many requests. Please wait a moment before trying again."):p(e.message||"Failed to send password reset email")}finally{c(!1)}},b=e=>{i(e),p("")};return m?(0,s.jsx)("div",{className:"min-h-screen auth-bg flex items-center justify-center p-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card rounded-3xl shadow-strong p-8 w-full max-w-md text-center",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},className:"w-16 h-16 bg-success-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(f.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"Check Your Email"}),(0,s.jsx)("p",{className:"text-text-secondary mb-4",children:"We've sent a password reset link to:"}),(0,s.jsx)("p",{className:"font-medium text-text-primary mb-6",children:a}),(0,s.jsxs)("div",{className:"card-light rounded-xl p-4 mb-6 text-left",children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary mb-2",children:"Next Steps:"}),(0,s.jsxs)("ol",{className:"text-sm text-text-secondary space-y-1",children:[(0,s.jsx)("li",{children:"1. Check your email inbox"}),(0,s.jsx)("li",{children:"2. Click the reset password link"}),(0,s.jsx)("li",{children:"3. Create a new password"}),(0,s.jsx)("li",{children:"4. Sign in with your new password"})]})]}),(0,s.jsx)("button",{onClick:t,className:"w-full btn-primary",children:"Back to Sign In"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("p",{className:"text-sm text-text-secondary",children:["Didn't receive the email? Check your spam folder or"," ",(0,s.jsx)("button",{onClick:()=>{u(!1),i("")},className:"text-primary-600 hover:text-primary-700 font-medium",children:"try again"})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen auth-bg flex items-center justify-center p-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card rounded-3xl shadow-strong p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},className:"w-16 h-16 bg-warning-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(d.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary",children:"Reset Your Password"}),(0,s.jsx)("p",{className:"text-text-secondary mt-2",children:"Enter your email address and we'll send you a link to reset your password"})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-secondary"}),(0,s.jsx)("input",{type:"email",value:a,onChange:e=>b(e.target.value),className:"input-field pl-10 ".concat(h?"border-error-500":""),placeholder:"john@example.com",autoComplete:"email"})]}),h&&(0,s.jsx)(l.E.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-600 text-sm mt-1",children:h})]}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"w-full btn-primary",children:r?"Sending Reset Link...":"Send Reset Link"})]}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsxs)("button",{onClick:t,className:"flex items-center justify-center text-text-secondary hover:text-text-primary mx-auto",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),"Back to Sign In"]})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 p-4 card-light rounded-xl",children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary mb-1",children:"Security Note"}),(0,s.jsx)("p",{className:"text-sm text-text-secondary",children:"For your security, the password reset link will expire in 1 hour. If you don't see the email, check your spam folder."})]})]})})}var v=a(82431),w=a(30401);function S(e){let{type:t,contact:a,onSuccess:i,onBack:r}=e,[c,m]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)(0),[j,N]=(0,n.useState)("");(0,n.useEffect)(()=>{S()},[]),(0,n.useEffect)(()=>{if(b>0){let e=setTimeout(()=>f(b-1),1e3);return()=>clearTimeout(e)}},[b]);let S=async()=>{try{g(!0),N(""),await (0,o.k_)("twilio-verify",{method:"POST",body:JSON.stringify({action:"send",type:t,contact:a})}),x.ZP.success("Verification code sent to your ".concat(t)),f(60)}catch(e){console.error("Error sending verification code:",e),x.ZP.error("Failed to send verification code: ".concat(e.message)),N(e.message)}finally{g(!1)}},E=async()=>{if(6!==c.length){N("Please enter a 6-digit code");return}try{h(!0),N(""),(await (0,o.k_)("twilio-verify",{method:"POST",body:JSON.stringify({action:"verify",type:t,contact:a,code:c})})).verified?(x.ZP.success("".concat(t," verified successfully!")),i()):N("Invalid verification code")}catch(e){console.error("Error verifying code:",e),N(e.message||"Verification failed")}finally{h(!1)}},k=e=>{let t=e.replace(/\D/g,"").slice(0,6);m(t),N(""),6===t.length&&setTimeout(()=>E(),100)};return(0,s.jsx)("div",{className:"min-h-screen auth-bg flex items-center justify-center p-4",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card rounded-3xl shadow-strong p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:"phone"===t?(0,s.jsx)(y.Z,{className:"w-8 h-8 text-white"}):(0,s.jsx)(d.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-text-primary",children:["Verify Your ","phone"===t?"Phone Number":"Email"]}),(0,s.jsx)("p",{className:"text-text-secondary mt-2",children:"We've sent a 6-digit code to"}),(0,s.jsx)("p",{className:"font-medium text-text-primary mt-1",children:a})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-4 text-center",children:"Enter Verification Code"}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("input",{type:"text",value:c,onChange:e=>k(e.target.value),className:"text-center text-2xl font-mono tracking-widest w-48 py-4 border-2 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-bg-secondary text-text-primary ".concat(j?"border-error-500":"border-border-subtle"),placeholder:"123456",maxLength:6,autoComplete:"one-time-code"})}),j&&(0,s.jsx)(l.E.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-600 text-sm mt-2 text-center",children:j})]}),(0,s.jsx)("button",{onClick:E,disabled:u||6!==c.length,className:"w-full btn-primary mb-4 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Verify Code"]})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-text-secondary text-sm mb-2",children:"Didn't receive the code?"}),(0,s.jsx)("button",{onClick:S,disabled:p||b>0,className:"text-primary-600 hover:text-primary-700 font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-1 animate-spin"}),"Sending..."]}):b>0?"Resend in ".concat(b,"s"):"Resend Code"})]}),r&&(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsx)("button",{onClick:r,className:"text-text-secondary hover:text-text-primary text-sm",children:"← Back"})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 p-4 bg-bg-secondary rounded-xl border border-border-subtle",children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary mb-1",children:"Having trouble?"}),(0,s.jsx)("p",{className:"text-sm text-text-secondary",children:"phone"===t?"Make sure your phone can receive SMS messages and check your spam folder.":"Check your email inbox and spam folder for the verification code."}),(0,s.jsxs)("p",{className:"text-sm text-text-secondary mt-2",children:["Contact us at"," ",(0,s.jsx)("a",{href:"mailto:contact@karmaloop.ai",className:"text-primary-600 hover:text-primary-700",children:"contact@karmaloop.ai"})," ","if you need help."]})]})]})})}function E(e){let{onAuthSuccess:t}=e,[a,r]=(0,n.useState)("login"),[l,o]=(0,n.useState)(""),{actions:c}=(0,i.q)(),d=async()=>{console.log("\uD83D\uDE80 AuthWrapper handleAuthSuccess called");try{await c.fetchUserData(),console.log("✅ AuthWrapper fetchUserData completed"),t()}catch(e){console.error("❌ AuthWrapper fetchUserData failed:",e),t()}},m=()=>{r("login")},u=()=>{d()};return(()=>{switch(a){case"login":default:return(0,s.jsx)(h,{onSuccess:d,onSwitchToSignup:()=>r("signup"),onForgotPassword:()=>r("forgot-password")});case"signup":return(0,s.jsx)(b,{onSuccess:m,onSwitchToLogin:()=>r("login")});case"forgot-password":return(0,s.jsx)(N,{onBack:()=>r("login")});case"verify-phone":return(0,s.jsx)(S,{type:"phone",contact:l,onSuccess:u,onBack:()=>r("login")});case"verify-email":return(0,s.jsx)(S,{type:"email",contact:l,onSuccess:u,onBack:()=>r("login")})}})()}var k=a(82222),C=a(95805),A=a(46221),P=a(53417),D=a(82023),T=a(76858),I=a(11239);function _(e){let{onGetStarted:t}=e,a=[{icon:k.Z,title:"AI Voice Agents",description:"Create intelligent voice agents that can handle sales calls and customer support 24/7"},{icon:y.Z,title:"Outbound & Inbound",description:"Handle incoming customer calls and make outbound sales calls automatically"},{icon:C.Z,title:"CRM Integration",description:"Automatically log calls, update customer records, and track interactions"},{icon:A.Z,title:"Analytics & Reports",description:"Get insights into call performance, success rates, and customer interactions"}],i=[{number:1,title:"Configure Your Agent",description:"Set up your business objective, target audience, and voice preferences"},{number:2,title:"Get Your Phone Number",description:"Acquire a dedicated phone number for your AI voice agent"},{number:3,title:"Go Live",description:"Your agent starts handling calls immediately"}];return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[(0,s.jsx)(l.E.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.1},className:"w-20 h-20 bg-primary-600 rounded-3xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(P.Z,{className:"w-10 h-10 text-white"})}),(0,s.jsxs)(l.E.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-4xl md:text-5xl font-bold text-neutral-900 mb-4",children:["Welcome to"," ",(0,s.jsx)("span",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"Kai"})]}),(0,s.jsx)(l.E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-xl text-neutral-600 mb-8 max-w-2xl mx-auto",children:"Transform your business with AI voice agents that handle sales calls and customer support with the intelligence and personality of your best team members."}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex items-center justify-center space-x-2 mb-8",children:[(0,s.jsx)(D.Z,{className:"w-5 h-5 text-warning-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-neutral-700",children:"14-day free trial • 100 minutes included • No credit card required"})]}),(0,s.jsxs)(l.E.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},onClick:e=>{e.preventDefault(),console.log("\uD83D\uDE80 Set Up First Agent clicked"),t()},type:"button",className:"btn-primary text-lg px-8 py-4 group",children:["Set Up Your First Agent",(0,s.jsx)(T.Z,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})]}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.6},className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:a.map((e,t)=>{let a=e.icon;return(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7+.1*t},className:"card text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(a,{className:"w-6 h-6 text-primary-600"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-neutral-900 mb-2",children:e.title}),(0,s.jsx)("p",{className:"text-neutral-600 text-sm",children:e.description})]},e.title)})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.8},className:"text-center mb-16",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-neutral-900 mb-4",children:"Get Started in 3 Simple Steps"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-12 max-w-2xl mx-auto",children:"Setting up your AI voice agent is quick and easy. You'll be handling calls in minutes."}),(0,s.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:i.map((e,t)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9+.1*t},className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:e.number})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-3",children:e.title}),(0,s.jsx)("p",{className:"text-neutral-600",children:e.description}),t<i.length-1&&(0,s.jsx)("div",{className:"hidden md:block absolute top-8 left-full w-full h-0.5 bg-gradient-to-r from-primary-300 to-transparent -translate-x-8"})]},e.number))})]}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:1},className:"card bg-gradient-to-r from-primary-600 to-secondary-600 text-white text-center",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsx)(I.Z,{className:"w-12 h-12 mx-auto mb-6 text-warning-300"}),(0,s.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Why Choose Kai?"}),(0,s.jsx)("p",{className:"text-primary-100 mb-8 text-lg",children:"Our AI voice agents are trained specifically for sales and customer support, with British charm and intelligence that converts prospects into customers."}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 text-left",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(f.Z,{className:"w-6 h-6 text-success-300 mt-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-1",children:"24/7 Availability"}),(0,s.jsx)("p",{className:"text-primary-100 text-sm",children:"Never miss a call or opportunity"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(f.Z,{className:"w-6 h-6 text-success-300 mt-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-1",children:"Instant Responses"}),(0,s.jsx)("p",{className:"text-primary-100 text-sm",children:"No wait times for customers"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(f.Z,{className:"w-6 h-6 text-success-300 mt-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-1",children:"Cost Effective"}),(0,s.jsx)("p",{className:"text-primary-100 text-sm",children:"Fraction of hiring a sales team"})]})]})]})]})})]})})}var Z=a(5095),O=a(58896),z=a(25846),q=a(81706),U=a(15001),F=a(22252),R=a(47692);function G(e){let{onComplete:t,onBack:a,onLogout:i}=e,[r,c]=(0,n.useState)(1),[d,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)([{id:"phone",title:"Acquiring phone number",status:"pending"},{id:"agent",title:"Creating AI agent",status:"pending"},{id:"setup",title:"Configuring voice settings",status:"pending"},{id:"deploy",title:"Deploying to production",status:"pending"}]),[b,N]=(0,n.useState)({name:"",description:"",voiceId:"Savannah",businessObjective:"",targetAudience:"",keyPainPoints:"",valuePropositon:"",callToAction:""}),[w,S]=(0,n.useState)({}),E=[{id:1,title:"Agent Identity",description:"Give your agent a name and personality",icon:k.Z},{id:2,title:"Business Setup",description:"Define your business objective and audience",icon:O.Z},{id:3,title:"Value Proposition",description:"Explain what makes you unique",icon:z.Z},{id:4,title:"Voice & Launch",description:"Choose voice and get your phone number",icon:q.Z}],C=(e,t,a)=>{g(s=>s.map(s=>s.id===e?{...s,status:t,error:a}:s))},A=e=>{let t={};switch(e){case 1:b.name.trim()||(t.name="Agent name is required");break;case 2:b.businessObjective.trim()||(t.businessObjective="Business objective is required"),b.targetAudience.trim()||(t.targetAudience="Target audience is required");break;case 3:b.keyPainPoints.trim()||(t.keyPainPoints="Key pain points are required"),b.valuePropositon.trim()||(t.valuePropositon="Value proposition is required"),b.callToAction.trim()||(t.callToAction="Call to action is required")}return S(t),0===Object.keys(t).length},P=async()=>{if(A(3)){m(!0),h(!0),g(e=>e.map(e=>({...e,status:"pending",error:void 0})));try{C("phone","loading");let e=(await Promise.race([(0,o.k_)("acquire-phone-number",{method:"POST",body:JSON.stringify({action:"search"})}),new Promise((e,t)=>setTimeout(()=>t(Error("Phone number search timed out. Please try again.")),3e4))])).availableNumbers;if(!e||0===e.length)throw Error("No phone numbers available in your area. Please contact support.");let a=await Promise.race([(0,o.k_)("acquire-phone-number",{method:"POST",body:JSON.stringify({action:"purchase",phoneNumberSid:e[0].phoneNumber})}),new Promise((e,t)=>setTimeout(()=>t(Error("Phone number purchase timed out. Please try again.")),3e4))]);C("phone","completed"),C("agent","loading"),await Promise.race([(0,o.k_)("create-agent",{method:"POST",body:JSON.stringify({name:b.name,description:b.description,voiceId:b.voiceId,businessObjective:b.businessObjective,targetAudience:b.targetAudience,keyPainPoints:b.keyPainPoints,valuePropositon:b.valuePropositon,callToAction:b.callToAction,phoneNumberId:a.phoneNumber.id})}),new Promise((e,t)=>setTimeout(()=>t(Error("Agent creation timed out. Please try again.")),45e3))]),C("agent","completed"),C("setup","loading"),await new Promise(e=>setTimeout(e,1500)),C("setup","completed"),C("deploy","loading"),await new Promise(e=>setTimeout(e,1e3)),C("deploy","completed"),x.ZP.success("Your AI voice agent is now live!"),setTimeout(()=>{t()},1500)}catch(t){console.error("Error creating agent:",t);let e=p.find(e=>"loading"===e.status);e&&C(e.id,"error",t.message),x.ZP.error(t.message||"Failed to create agent"),m(!1)}}},D=(e,t)=>{N(a=>({...a,[e]:t})),w[e]&&S(t=>({...t,[e]:void 0}))};return u?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-bg-primary to-bg-secondary flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"card rounded-3xl shadow-strong p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(k.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Creating Your Agent"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Please wait while we set up your AI voice agent"})]}),(0,s.jsx)("div",{className:"space-y-4 mb-8",children:p.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ".concat("completed"===e.status?"bg-success-600 text-white":"loading"===e.status?"bg-primary-600 text-white":"error"===e.status?"bg-error-600 text-white":"bg-neutral-600 text-white"),children:["completed"===e.status&&(0,s.jsx)(f.Z,{className:"w-4 h-4"}),"loading"===e.status&&(0,s.jsx)(U.Z,{className:"w-4 h-4 animate-spin"}),"error"===e.status&&(0,s.jsx)(F.Z,{className:"w-4 h-4"}),"pending"===e.status&&(0,s.jsx)("div",{className:"w-2 h-2 bg-current rounded-full"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("error"===e.status?"text-error-600":"text-text-primary"),children:e.title}),e.error&&(0,s.jsx)("p",{className:"text-xs text-error-500 mt-1",children:e.error})]})]},e.id))}),(!d||p.some(e=>"error"===e.status))&&(0,s.jsx)("div",{className:"flex flex-col space-y-3",children:p.some(e=>"error"===e.status)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:P,className:"btn-primary w-full",disabled:d,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Retrying..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Try Again"]})}),(0,s.jsx)("button",{onClick:()=>{h(!1),m(!1),c(1),g(e=>e.map(e=>({...e,status:"pending",error:void 0})))},className:"btn-secondary w-full",children:"Start Over"}),i&&(0,s.jsxs)("button",{onClick:i,className:"btn-ghost w-full flex items-center justify-center",children:[(0,s.jsx)(R.Z,{className:"w-4 h-4 mr-2"}),"Logout & Start Fresh"]})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-bg-primary to-bg-secondary flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"card rounded-3xl shadow-strong p-8 w-full max-w-2xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-text-primary",children:"Set Up Your AI Agent"}),(0,s.jsxs)("span",{className:"text-sm text-text-tertiary",children:["Step ",r," of ",4]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:E.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(r>=e.id?"bg-primary-600 text-white":"bg-neutral-600 text-white"),children:r>e.id?(0,s.jsx)(f.Z,{className:"w-5 h-5"}):e.id}),t<E.length-1&&(0,s.jsx)("div",{className:"flex-1 h-1 mx-2 rounded ".concat(r>e.id?"bg-primary-600":"bg-neutral-600")})]},e.id))})]}),(0,s.jsx)(Z.M,{mode:"wait",children:(()=>{switch(r){case 1:return(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(k.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Meet Your AI Agent"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Give your agent a name and describe what it does"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Agent Name"}),(0,s.jsx)("input",{type:"text",value:b.name,onChange:e=>D("name",e.target.value),className:"input-field ".concat(w.name?"border-error-500":""),placeholder:"e.g., Sarah - Sales Assistant"}),w.name&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Description (Optional)"}),(0,s.jsx)("textarea",{value:b.description,onChange:e=>D("description",e.target.value),className:"input-field resize-none",rows:3,placeholder:"Brief description of what this agent will do..."})]})]},"step1");case 2:return(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(O.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Business Objectives"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Help us understand your business goals and audience"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"What is your main business objective?"}),(0,s.jsx)("textarea",{value:b.businessObjective,onChange:e=>D("businessObjective",e.target.value),className:"input-field resize-none ".concat(w.businessObjective?"border-error-500":""),rows:3,placeholder:"e.g., Generate qualified leads for our software consultancy services..."}),w.businessObjective&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.businessObjective})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Who is your target audience?"}),(0,s.jsx)("textarea",{value:b.targetAudience,onChange:e=>D("targetAudience",e.target.value),className:"input-field resize-none ".concat(w.targetAudience?"border-error-500":""),rows:3,placeholder:"e.g., CTOs and technical leaders at mid-size companies looking to modernize their systems..."}),w.targetAudience&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.targetAudience})]})]},"step2");case 3:return(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(z.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Value Proposition"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Define what makes you unique and compelling"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"What key pain points do you solve?"}),(0,s.jsx)("textarea",{value:b.keyPainPoints,onChange:e=>D("keyPainPoints",e.target.value),className:"input-field resize-none ".concat(w.keyPainPoints?"border-error-500":""),rows:3,placeholder:"e.g., Outdated systems slowing down operations, high technical debt, lack of automation..."}),w.keyPainPoints&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.keyPainPoints})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"What's your unique value proposition?"}),(0,s.jsx)("textarea",{value:b.valuePropositon,onChange:e=>D("valuePropositon",e.target.value),className:"input-field resize-none ".concat(w.valuePropositon?"border-error-500":""),rows:3,placeholder:"e.g., We deliver modern, scalable solutions 3x faster than traditional agencies with guaranteed ROI..."}),w.valuePropositon&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.valuePropositon})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"What action do you want prospects to take?"}),(0,s.jsx)("textarea",{value:b.callToAction,onChange:e=>D("callToAction",e.target.value),className:"input-field resize-none ".concat(w.callToAction?"border-error-500":""),rows:3,placeholder:"e.g., Schedule a free 30-minute technical assessment call to discuss their specific needs..."}),w.callToAction&&(0,s.jsx)("p",{className:"text-error-600 text-sm mt-1",children:w.callToAction})]})]},"step3");case 4:return(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(q.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Voice & Launch"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"Choose your agent's voice and we'll get you a phone number"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-4",children:"Choose Voice"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>D("voiceId","Savannah"),className:"p-6 rounded-xl border-2 transition-all duration-200 text-left ".concat("Savannah"===b.voiceId?"border-primary-500 bg-primary-900/20":"border-border-subtle hover:border-primary-300 bg-bg-secondary"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary",children:"Sandra"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("Savannah"===b.voiceId?"border-primary-500 bg-primary-500":"border-neutral-400")})]}),(0,s.jsx)("p",{className:"text-sm text-text-secondary mb-3",children:"Professional, warm, and confident voice perfect for sales and customer service"}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,s.jsx)(q.Z,{className:"w-3 h-3 mr-1"}),"British accent, friendly tone"]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>D("voiceId","Elliot"),className:"p-6 rounded-xl border-2 transition-all duration-200 text-left ".concat("Elliot"===b.voiceId?"border-primary-500 bg-primary-900/20":"border-border-subtle hover:border-primary-300 bg-bg-secondary"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary",children:"Jackson"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border-2 ".concat("Elliot"===b.voiceId?"border-primary-500 bg-primary-500":"border-neutral-400")})]}),(0,s.jsx)("p",{className:"text-sm text-text-secondary mb-3",children:"Authoritative and trustworthy voice ideal for technical and business discussions"}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-text-tertiary",children:[(0,s.jsx)(q.Z,{className:"w-3 h-3 mr-1"}),"British accent, professional tone"]})]})]}),(0,s.jsx)("p",{className:"text-xs text-text-tertiary mt-2 text-center",children:"More voice options coming soon!"})]}),(0,s.jsx)("div",{className:"bg-primary-900/20 border border-primary-500/30 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(y.Z,{className:"w-6 h-6 text-primary-400 mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-text-primary mb-1",children:"Phone Number Setup"}),(0,s.jsx)("p",{className:"text-sm text-text-secondary mb-3",children:"We'll automatically acquire a US phone number for your agent and configure it for inbound calls. For outbound calling, you'll add contacts in the CRM section."}),(0,s.jsx)("div",{className:"text-xs text-text-tertiary",children:"• Instant setup • US numbers only • Inbound calls ready immediately"})]})]})})]},"step4");default:return null}})()}),(0,s.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,s.jsxs)("button",{onClick:()=>{r>1?c(r-1):a()},className:"btn-secondary flex items-center",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),r<4?(0,s.jsxs)("button",{onClick:()=>{A(r)&&c(r+1)},className:"btn-primary flex items-center",children:["Continue",(0,s.jsx)(T.Z,{className:"w-4 h-4 ml-2"})]}):(0,s.jsx)("button",{onClick:P,disabled:d,className:"btn-primary flex items-center",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Agent..."]}):(0,s.jsxs)(s.Fragment,{children:["Launch Agent",(0,s.jsx)(T.Z,{className:"w-4 h-4 ml-2"})]})})]})]})})}function L(){let{state:e,actions:t}=(0,i.q)(),a=(0,r.useRouter)(),c=(0,r.usePathname)();return((0,n.useEffect)(()=>{var s;if(!e.initialized||e.isNavigating||e.loading){console.log("⏳ Waiting for initialization...",{initialized:e.initialized,navigating:e.isNavigating,loading:e.loading});return}if(console.log("\uD83E\uDDED Navigation check:",{currentPath:c,hasUser:!!e.user,hasProfile:!!e.profile,hasOrg:!!e.organization,agentsCount:e.agents.length,onboardingComplete:null===(s=e.profile)||void 0===s?void 0:s.onboarding_completed}),!e.user){"/auth"!==c&&(console.log("\uD83D\uDD10 Redirecting to auth"),a.replace("/auth"));return}if(!e.profile||!e.organization){"/welcome"!==c&&(console.log("\uD83D\uDC4B Redirecting to welcome"),a.push("/welcome"));return}if(!e.profile.onboarding_completed){if(e.agents.length>0){console.log("\uD83D\uDD27 Fixing onboarding status..."),o.OQ.from("user_profiles").update({onboarding_completed:!0}).eq("id",e.user.id).then(()=>{console.log("✅ Fixed onboarding status"),t.fetchUserData()});return}"/welcome"!==c&&"/setup"!==c&&(console.log("\uD83E\uDD16 Redirecting to welcome for onboarding"),a.push("/welcome"));return}if(0===e.agents.length){"/setup"!==c&&(console.log("\uD83E\uDD16 Redirecting to agent setup"),a.push("/setup"));return}("/auth"===c||"/welcome"===c||"/setup"===c||"/"===c)&&(console.log("\uD83D\uDCCA Redirecting to dashboard"),a.push("/dashboard"))},[e.initialized,e.loading,e.isNavigating,e.user,e.profile,e.organization,e.agents.length,c,a,t]),!e.initialized||e.loading)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[(0,s.jsx)("div",{className:"loading-spinner mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-xl text-text-primary mb-3",children:"Loading Kai"}),(0,s.jsx)("p",{className:"text-text-secondary",children:e.initialized?e.isNavigating?"Processing authentication...":"Setting up your workspace...":"Initializing your AI voice platform..."})]})}):"/auth"===c?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:(0,s.jsx)(E,{onAuthSuccess:t.fetchUserData})})}):"/welcome"===c?(0,s.jsx)(_,{onGetStarted:()=>a.push("/setup")}):"/setup"===c?(0,s.jsx)(G,{onComplete:async()=>{await t.fetchUserData(),a.push("/dashboard")},onBack:()=>a.push("/welcome")}):null}},5526:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},OQ:function(){return r},k_:function(){return n},lj:function(){return d},un:function(){return l},xG:function(){return c}});var s=a(57557);let i="https://ixeqedgrusamxwsvwoho.supabase.co",r=(0,s.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4ZXFlZGdydXNhbXh3c3Z3b2hvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3NDUwODcsImV4cCI6MjA2NTMyMTA4N30.tCb8nATBWRQrbhMXKT-omop5ZLNA954ObbGbQcKjxCc"),n=async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null===(t=(await r.auth.getSession()).data.session)||void 0===t?void 0:t.access_token,n={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)}}},l=await fetch("".concat(i,"/functions/v1/").concat(e),{...n,...a,headers:{...n.headers,...a.headers}});if(!l.ok)throw Error(await l.text());return l.json()},l=e=>{if(e.startsWith("+1")&&12===e.length){let t=e.slice(2);return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e},o=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),d=e=>{switch(e){case"success":return"text-white bg-success-600 border border-success-500";case"failure":case"error":return"text-white bg-error-600 border border-error-500";case"no_answer":case"busy":return"text-white bg-warning-600 border border-warning-500";case"voicemail":return"text-white bg-secondary-600 border border-secondary-500";case"in_progress":return"text-white bg-primary-600 border border-primary-500";default:return"text-white bg-neutral-600 border border-neutral-500"}}},43860:function(e,t,a){"use strict";a.d(t,{q:function(){return d},w:function(){return m}});var s=a(14623),i=a(2265),r=a(5526),n=a(69064);let l={user:null,profile:null,organization:null,subscription:null,loading:!0,initialized:!1,agents:[],contacts:[],selectedAgent:null,isNavigating:!1};function o(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.loading};case"SET_INITIALIZED":return{...e,initialized:t.initialized};case"SET_NAVIGATING":return{...e,isNavigating:t.isNavigating};case"SET_USER":return{...e,user:t.user};case"SET_PROFILE":return{...e,profile:t.profile};case"SET_ORGANIZATION":return{...e,organization:t.organization};case"SET_SUBSCRIPTION":return{...e,subscription:t.subscription};case"SET_AGENTS":return{...e,agents:t.agents};case"SET_CONTACTS":return{...e,contacts:t.contacts};case"SET_SELECTED_AGENT":return{...e,selectedAgent:t.agent};case"RESET_STATE":return{...l,initialized:!0,loading:!1};case"AUTH_SUCCESS":return{...e,user:t.payload.user,profile:t.payload.profile||null,organization:t.payload.organization||null,subscription:t.payload.subscription||null,agents:t.payload.agents||[],loading:!1,initialized:!0};default:return e}}let c=(0,i.createContext)(void 0);function d(){let e=(0,i.useContext)(c);if(void 0===e)throw Error("useApp must be used within an AppProvider");return e}function m(e){var t;let{children:a}=e,[d,m]=(0,i.useReducer)(o,l),u=async()=>{try{console.log("\uD83D\uDD04 Starting fetchUserData..."),m({type:"SET_LOADING",loading:!0});let{data:{user:e},error:t}=await r.OQ.auth.getUser();if(t||!e){console.log("\uD83D\uDC64 No user found or error:",t),m({type:"RESET_STATE"});return}console.log("✅ User found:",e.email);let{data:a,error:s}=await r.OQ.from("user_profiles").select("*").eq("id",e.id).single();if(s){console.error("❌ Error fetching profile:",s),m({type:"AUTH_SUCCESS",payload:{user:e}});return}let i=null,n=null,l=[];if(null==a?void 0:a.organization_id){let{data:e}=await r.OQ.from("organizations").select("*").eq("id",a.organization_id).single();i=e;let{data:t}=await r.OQ.from("subscriptions").select("*").eq("organization_id",a.organization_id).single();n=t;let{data:s}=await r.OQ.from("agents").select("*").eq("organization_id",a.organization_id).order("created_at",{ascending:!1});l=s||[]}m({type:"AUTH_SUCCESS",payload:{user:e,profile:a,organization:i,subscription:n,agents:l}}),console.log("✅ fetchUserData completed")}catch(e){console.error("\uD83D\uDCA5 Error in fetchUserData:",e),m({type:"SET_LOADING",loading:!1})}},x=(0,i.useMemo)(()=>({setLoading:e=>m({type:"SET_LOADING",loading:e}),setNavigating:e=>m({type:"SET_NAVIGATING",isNavigating:e}),fetchUserData:u,fetchAgents:async()=>{try{var e;if(!(null===(e=d.profile)||void 0===e?void 0:e.organization_id))return console.log("⚠️ No organization_id, cannot fetch agents"),[];let{data:t,error:a}=await r.OQ.from("agents").select("*").eq("organization_id",d.profile.organization_id).order("created_at",{ascending:!1});if(a)throw a;return m({type:"SET_AGENTS",agents:t||[]}),t||[]}catch(e){return console.error("\uD83D\uDCF4 Error fetching agents:",e),m({type:"SET_AGENTS",agents:[]}),[]}},fetchContacts:async()=>{try{var e;if(!(null===(e=d.profile)||void 0===e?void 0:e.organization_id))return;let{data:t}=await r.OQ.from("contacts").select("*").eq("organization_id",d.profile.organization_id).order("created_at",{ascending:!1});m({type:"SET_CONTACTS",contacts:t||[]})}catch(e){console.error("Error fetching contacts:",e),m({type:"SET_CONTACTS",contacts:[]})}},logout:async()=>{await r.OQ.auth.signOut(),m({type:"RESET_STATE"})}}),[null===(t=d.profile)||void 0===t?void 0:t.organization_id,m]);return(0,i.useEffect)(()=>{let e=async()=>{console.log("\uD83D\uDE80 Initializing app...");let e=new URLSearchParams(window.location.search),t="Email confirmed"===e.get("message"),a=e.get("error_description");t?(n.ZP.success("Email verified successfully! Welcome to Kai Agent."),window.history.replaceState({},document.title,window.location.pathname)):a&&(n.ZP.error("Authentication error: ".concat(a)),window.history.replaceState({},document.title,window.location.pathname));let{data:{session:s}}=await r.OQ.auth.getSession();(null==s?void 0:s.user)?await u():m({type:"RESET_STATE"}),m({type:"SET_INITIALIZED",initialized:!0})};d.initialized||e();let{data:{subscription:t}}=r.OQ.auth.onAuthStateChange(async(e,t)=>{console.log("\uD83D\uDD10 Auth state change:",{event:e,hasUser:!!(null==t?void 0:t.user)}),"SIGNED_IN"===e&&(null==t?void 0:t.user)?(m({type:"SET_NAVIGATING",isNavigating:!0}),await u(),m({type:"SET_NAVIGATING",isNavigating:!1})):"SIGNED_OUT"===e&&m({type:"RESET_STATE"})});return()=>t.unsubscribe()},[d.initialized]),(0,s.jsx)(c.Provider,{value:{state:d,dispatch:m,actions:x},children:a})}}}]);